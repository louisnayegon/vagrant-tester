---
os:  linux
dist: focal
language: csharp
dotnet: 5.0
mono: none

addons:
  apt:
    packages:
      - doxygen
      - nuget
env:
  global:
    - ASPNETCORE_ENVIRONMENT=Development
    - DOTNET_PRINT_TELEMETRY_MESSAGE=false
    - DOTNET_CLI_TELEMETRY_OPTOUT=true

# Cache the big Vagrant boxes
cache:
  directories:
  - /home/travis/.vagrant.d/boxes

install:
# Install libvrt & KVM (see https://github.com/alvistack/ansible-role-virtualbox/blob/master/.travis.yml)
- sudo apt upgrade && sudo apt update && sudo apt install -y qemu-kvm libvirt-clients libvirt-daemon-system bridge-utils virt-manager

# Download Vagrant & Install Vagrant package
- sudo wget -nv https://releases.hashicorp.com/vagrant/2.2.19/vagrant_2.2.19_x86_64.deb
- sudo dpkg -i vagrant_2.2.19_x86_64.deb

# Vagrant correctly installed?
- vagrant --version

# Install vagrant-libvirt Vagrant plugin
- sudo vagrant plugin install libvirt
- sudo vagrant plugin install vagrant-libvirt

script:
- sudo vagrant up
- sudo vagrant ssh -c "echo 'hello world!'"
